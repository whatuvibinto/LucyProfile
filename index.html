<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Instagram Profile</title>
  <style>
    /* ãƒ™ãƒ¼ã‚¹ã®è¨­å®šï¼šã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚’éš ã—ã€æ–‡å­—é¸æŠã‚’ç„¡åŠ¹åŒ– */
    body { 
      margin: 0; 
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
      overflow: hidden; 
      background: #fafafa;
      user-select: none;
    }

    /* ã‚¤ãƒ³ã‚¹ã‚¿é¢¨ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
    .header { padding: 12px; text-align: center; font-weight: bold; border-bottom: 1px solid #dbdbdb; background: white;}
    .profile-info { display: flex; padding: 20px; align-items: center; background: white;}
    .avatar { width: 80px; height: 80px; border-radius: 50%; background: #ccc; margin-right: 20px; }
    .stats { display: flex; gap: 20px; }
    .stat { text-align: center; font-size: 14px;}
    .stat span { display: block; font-weight: bold; font-size: 16px;}
    .bio { padding: 0 20px 20px; font-size: 14px; background: white;}
    .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; }
    .post { background: #ddd; aspect-ratio: 1; }
    
    /* å´©å£Šã•ã›ã‚‹è¦ç´ ã®åˆæœŸè¨­å®š */
    .matter-elem { 
      will-change: transform; /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ»‘ã‚‰ã‹ã«ã™ã‚‹ãŠã¾ã˜ãªã„ */
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
</head>
<body>

  <div id="wrapper">
    <div class="header matter-elem">your_username</div>
    
    <div class="profile-info matter-elem">
      <div class="avatar"></div>
      <div class="stats">
        <div class="stat"><span>120</span>æŠ•ç¨¿</div>
        <div class="stat"><span>500</span>ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼</div>
        <div class="stat"><span>300</span>ãƒ•ã‚©ãƒ­ãƒ¼</div>
      </div>
    </div>
    
    <div class="bio matter-elem">
      <b>ã‚ãªãŸã®åå‰</b><br>
      ã“ã‚“ã«ã¡ã¯ï¼ã“ã“ãŒç§ã®è‡ªå·±ç´¹ä»‹ã§ã™ã€‚<br>
      ãƒªãƒ³ã‚¯ã¯ä¸‹ã‚’ãƒã‚§ãƒƒã‚¯ğŸ‘‡
    </div>
    
    <div class="grid">
      <div class="post matter-elem" style="background: #ffb6b9;"></div>
      <div class="post matter-elem" style="background: #fae3d9;"></div>
      <div class="post matter-elem" style="background: #bbded6;"></div>
      <div class="post matter-elem" style="background: #8ac6d1;"></div>
      <div class="post matter-elem" style="background: #ffb6b9;"></div>
      <div class="post matter-elem" style="background: #fae3d9;"></div>
    </div>
  </div>

  <script>
    // ç”»é¢ã‚’ã‚¿ãƒƒãƒ—ï¼ˆã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ï¼‰ã—ãŸæ™‚ã«ç™ºå‹•
    document.body.addEventListener('click', () => {
      if (window.hasStarted) return; // 2å›ç›®ä»¥é™ã®ã‚¿ãƒƒãƒ—ã‚’ç„¡è¦–
      window.hasStarted = true;
      
      const Engine = Matter.Engine,
            World = Matter.World,
            Bodies = Matter.Bodies,
            Runner = Matter.Runner;

      const engine = Engine.create();
      const world = engine.world;

      // å´©å£Šã•ã›ã‚‹HTMLè¦ç´ ã‚’å–å¾—
      const elements = document.querySelectorAll('.matter-elem');
      const bodiesInfo = [];

      const width = window.innerWidth;
      const height = window.innerHeight;

      // è¦‹ãˆãªã„ã€ŒåºŠã€ã¨ã€Œå£ã€ã‚’ä½œã£ã¦ã€è¦ç´ ãŒç”»é¢å¤–ã«æ¶ˆãˆãªã„ã‚ˆã†ã«ã™ã‚‹
      const ground = Bodies.rectangle(width / 2, height + 25, width, 50, { isStatic: true });
      const leftWall = Bodies.rectangle(-25, height / 2, 50, height, { isStatic: true });
      const rightWall = Bodies.rectangle(width + 25, height / 2, 50, height, { isStatic: true });
      World.add(world, [ground, leftWall, rightWall]);

      // å„HTMLè¦ç´ ã®ä½ç½®ã¨ã‚µã‚¤ã‚ºã‚’èª­ã¿å–ã‚Šã€Matter.jsã®ç‰©ç†ãƒœãƒ‡ã‚£ã«å¤‰æ›
      elements.forEach((el) => {
        const rect = el.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top + rect.height / 2;

        // CSSã‚’çµ¶å¯¾é…ç½®ã«åˆ‡ã‚Šæ›¿ãˆã¦ã€ç‰©ç†æ¼”ç®—ã§å‹•ã‹ã›ã‚‹ã‚ˆã†ã«æº–å‚™
        el.style.position = 'absolute';
        el.style.left = rect.left + 'px';
        el.style.top = rect.top + 'px';
        el.style.width = rect.width + 'px';
        el.style.height = rect.height + 'px';
        el.style.margin = '0';
        el.style.boxSizing = 'border-box';
        
        // ç‰©ç†ãƒœãƒ‡ã‚£ã®ä½œæˆï¼ˆåç™ºåŠ›ã‚„æ‘©æ“¦ã‚’è¨­å®šï¼‰
        const body = Bodies.rectangle(x, y, rect.width, rect.height, {
          restitution: 0.4, // å¼¾ã¿å…·åˆï¼ˆ0ã€œ1ï¼‰
          friction: 0.5   // æ‘©æ“¦
        });
        
        World.add(world, body);
        bodiesInfo.push({ body: body, elem: el, width: rect.width, height: rect.height, initialLeft: rect.left, initialTop: rect.top });
      });

      // ç‰©ç†ã‚¨ãƒ³ã‚¸ãƒ³ãŒæ›´æ–°ã•ã‚Œã‚‹ãŸã³ã«ã€HTMLè¦ç´ ã®CSS(transform)ã‚’é€£å‹•ã•ã›ã‚‹
      Matter.Events.on(engine, 'afterUpdate', function() {
        bodiesInfo.forEach((item) => {
          const { x, y } = item.body.position;
          const angle = item.body.angle;
          
          const shiftX = x - item.width / 2 - item.initialLeft;
          const shiftY = y - item.height / 2 - item.initialTop;
          
          item.elem.style.transform = `translate(${shiftX}px, ${shiftY}px) rotate(${angle}rad)`;
        });
      });

      // ç‰©ç†ã‚¨ãƒ³ã‚¸ãƒ³ã‚’èµ·å‹•ï¼
      Runner.run(Runner.create(), engine);
      
      // ãŠã¾ã‘ï¼šã‚¹ãƒãƒ›ã‚’ãƒ–ãƒ«ãƒƒã¨éœ‡ã‚ã›ã‚‹ï¼ˆAndroidãªã©ã§æœ‰åŠ¹ï¼‰
      if (navigator.vibrate) {
        navigator.vibrate(200);
      }
    }, { once: true });
  </script>
</body>
</html>
